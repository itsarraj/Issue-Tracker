<script src="/js/create-issue.js"></script>
<link rel="stylesheet" href="/css/create-issue.css">


<div class="container mt-5">
  <h1>Create Issue</h1>
  <hr>

  <form action="/projects/<%= project._id %>/issues/new" method="POST">
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" id="title" name="title" required>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea class="form-control" id="description" name="description" rows="5" required></textarea>
    </div>

    <div class="form-group">
      <label for="labels">Labels</label>
      <select multiple class="form-control" id="labelDropdown" name="labels" required>
        <% const labelSet = new Set(); %>
        <% issues.forEach( issue => { %>
        <% if (issue.labels){ %>
        <% issue.labels.forEach(label => { %>

        <% if (!labelSet.has(label)) { %>
        <% labelSet.add(label); %>

        <option value="<%= label %>"><%= label %></option>
        <% } %>

        <% } ) %>
        <% }; %>
        <% } ) %>
      </select>
      <input type="text" class="form-control" id="labelInput" name="labelInput">
    </div>

    <div class="form-group">
      <label for="author">Author:</label>
      <input type="text" class="form-control" id="author" name="author" required>
    </div>

    <div class="form-group">
      <button type="submit" class="btn btn-primary">Create Issue</button>
    </div>
  </form>
</div>